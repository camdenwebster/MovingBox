{"id":"MovingBox-0gq","title":"Optimize video-flow final item creation throughput for large batches","description":"Investigate and optimize end-of-video item creation performance when saving ~60-70 items. Focus on SwiftData write efficiency, transaction batching, and unnecessary per-item save overhead.","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T21:15:00.714997-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T21:58:04.588334-06:00","closed_at":"2026-02-06T21:58:04.588334-06:00","close_reason":"Closed"}
{"id":"MovingBox-1dj","title":"Implement CloudKit legacy record recovery","status":"closed","priority":1,"issue_type":"feature","owner":"camden@mothersound.dev","created_at":"2026-02-06T08:58:56.31355-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:58:55.280844-06:00","closed_at":"2026-02-06T09:58:55.280844-06:00","close_reason":"Implemented CloudKitRecoveryCoordinator with probe, recovery, zone cleanup, and unit tests. All 14 new tests pass."}
{"id":"MovingBox-1oa","title":"Video Analysis Cleanup (Epic)","status":"open","priority":2,"issue_type":"epic","owner":"camden@mothersound.dev","created_at":"2026-02-07T16:36:54.788373-06:00","created_by":"Camden Webster","updated_at":"2026-02-07T16:36:54.788373-06:00"}
{"id":"MovingBox-1oa.1","title":"Add unit tests for VideoItemDeduplicator, VideoAnalysisCoordinator, VideoFrameExtractor","description":"Three new services in the video analysis pipeline have no test coverage. VideoItemDeduplicator is business-critical (fuzzy matching/deduplication logic). VideoAnalysisCoordinator orchestrates the full pipeline. VideoFrameExtractor handles frame timing. All need thorough unit tests with edge cases.","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-07T16:37:02.781832-06:00","created_by":"Camden Webster","updated_at":"2026-02-07T16:37:02.781832-06:00","dependencies":[{"issue_id":"MovingBox-1oa.1","depends_on_id":"MovingBox-1oa","type":"parent-child","created_at":"2026-02-07T16:37:02.792953-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-1oa.2","title":"Re-enable 6 disabled test files renamed with .needs-refactor-for-new-api","description":"Six test files were renamed with .needs-refactor-for-new-api suffix to disable them during the video analysis feature work. These tests need to be updated to work with the new AIAnalysisService API and re-enabled. Files: AIAnalysisServiceTests, MockAIAnalysisServiceTests, MultiItemAnalysisTests, MultiItemSelectionViewModelTests, ImageAnalysisViewModelTests, SingleItemAnalysisTests.","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-07T16:37:04.978844-06:00","created_by":"Camden Webster","updated_at":"2026-02-07T16:37:04.978844-06:00","dependencies":[{"issue_id":"MovingBox-1oa.2","depends_on_id":"MovingBox-1oa","type":"parent-child","created_at":"2026-02-07T16:37:04.980984-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-1oa.3","title":"Address @unchecked Sendable data race in VideoAnalysisCoordinator","description":"VideoAnalysisCoordinator uses @unchecked Sendable with mutable stored properties (extractedFrames, progressiveMergedResponse, totalBatchCount, completedBatchCount). This creates a data race risk when accessed from multiple concurrent contexts. Should use an actor, proper synchronization, or restructure to avoid shared mutable state.","status":"open","priority":2,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-07T16:37:07.743785-06:00","created_by":"Camden Webster","updated_at":"2026-02-07T16:37:07.743785-06:00","dependencies":[{"issue_id":"MovingBox-1oa.3","depends_on_id":"MovingBox-1oa","type":"parent-child","created_at":"2026-02-07T16:37:07.747854-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-1oa.4","title":"Split AIAnalysisService.swift into separate files","description":"AIAnalysisService.swift is 2,422 lines with 15+ types in one file. Violates the one-type-per-file guideline. Should extract into separate files: AIAnalysisServiceProtocol, AIAnalysisError, MultiItemAnalysisResponse, MockAIAnalysisService, AIAnalysisServiceFactory, ImageDetails, and supporting types.","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-07T16:37:10.519529-06:00","created_by":"Camden Webster","updated_at":"2026-02-07T16:37:10.519529-06:00","dependencies":[{"issue_id":"MovingBox-1oa.4","depends_on_id":"MovingBox-1oa","type":"parent-child","created_at":"2026-02-07T16:37:10.525764-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-1oa.5","title":"Extract shared Levenshtein distance into reusable utility","description":"Levenshtein distance calculation is duplicated in 3 places: VideoItemDeduplicator, LabelAutoAssignment, and MultiItemSelectionViewModel. Extract into a single shared String extension or utility function.","status":"open","priority":3,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-07T16:37:11.543758-06:00","created_by":"Camden Webster","updated_at":"2026-02-07T16:37:11.543758-06:00","dependencies":[{"issue_id":"MovingBox-1oa.5","depends_on_id":"MovingBox-1oa","type":"parent-child","created_at":"2026-02-07T16:37:11.54555-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-1un","title":"Create MovingBoxAIProxyAdapter Apple-only package target","description":"Add an adapter target that bridges AIProxy SDK and UIImage concerns to the new AI ports. Keep all iOS/macOS-only APIs out of AI domain/core targets.","status":"open","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T09:44:17.886061-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:44:17.886061-06:00","labels":["ai","architecture","modularization"]}
{"id":"MovingBox-1xf","title":"Improve iOS CI test result artifacts and reporting","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-23T20:56:06.795213-06:00","created_by":"Camden Webster","updated_at":"2026-02-23T20:56:49.848471-06:00","closed_at":"2026-02-23T20:56:49.848471-06:00","close_reason":"Closed"}
{"id":"MovingBox-1xo","title":"Adjust parent chrome for multi-item selection layout","status":"closed","priority":3,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-05T14:56:00.148071-06:00","created_by":"Camden Webster","updated_at":"2026-02-05T14:56:18.723632-06:00","closed_at":"2026-02-05T14:56:18.723632-06:00","close_reason":"Closed"}
{"id":"MovingBox-2il","title":"Extract billing entitlement rules into package and RevenueCat adapter","description":"Move plan/entitlement decision logic into a package-level module and isolate RevenueCat SDK integration in an Apple-only adapter target. Ensure billing business rules can be unit-tested without app target dependencies.","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T09:44:31.498206-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:44:31.498206-06:00","labels":["architecture","billing","modularization"]}
{"id":"MovingBox-33c","title":"Extract AI interfaces into MovingBoxAIPorts package","description":"Create a new local package target for AI ports (transport, image preprocessing, database/category lookup, telemetry sink) so core AI logic depends on protocols only. Keep ports pure Swift and Linux-compatible.","status":"open","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T09:44:11.408852-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:44:11.408852-06:00","labels":["ai","architecture","modularization"]}
{"id":"MovingBox-348","title":"Switch TestFlight workflow to automatic signing","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-21T15:24:50.44019-06:00","created_by":"Camden Webster","updated_at":"2026-02-21T15:25:30.380292-06:00","closed_at":"2026-02-21T15:25:30.380292-06:00","close_reason":"Closed"}
{"id":"MovingBox-35m","title":"Investigate ItemCreationFlowTests expectation failures in focused xcodebuild run","description":"Focused test run on 2026-02-05 failed multiple ItemCreationFlowTests while MultiItemSelectionViewTests passed. Need to determine whether failures are pre-existing/flaky or due to navigation expectation drift and stabilize the suite.","status":"open","priority":3,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-05T14:56:54.661799-06:00","created_by":"Camden Webster","updated_at":"2026-02-05T14:56:54.661799-06:00"}
{"id":"MovingBox-3bh","title":"Enforce modular dependency rules for package boundaries","description":"Add architecture guardrails (documented rules + lightweight validation checks) to prevent domain/use-case modules from importing Apple SDKs or concrete adapters directly.","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T09:44:41.237368-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:44:41.237368-06:00","labels":["architecture","modularization","quality"]}
{"id":"MovingBox-3ik","title":"Prepend new video-detected items and show top streaming skeleton","description":"Update VideoItemSelectionListView so newly arriving analysis items appear at the top of the list with insertion animation, and keep a shimmer skeleton card pinned at top while streaming.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T08:40:49.154511-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T08:41:01.900302-06:00","closed_at":"2026-02-06T08:41:01.900302-06:00","close_reason":"Implemented top-insert behavior for new streamed items and pinned top shimmer skeleton during streaming."}
{"id":"MovingBox-3ja","title":"Fix empty Label Settings state: toolbar/add action missing","description":"In 2.1.0 and upgrade-path validation, when there are zero labels the Label Settings screen shows ContentUnavailableView and the toolbar add action disappears, leaving no obvious way to create the first label from that screen.","acceptance_criteria":"When label count is 0, Label Settings still exposes an obvious add action; ContentUnavailableView includes an Add Label button; tapping either entry point navigates to New Label and successfully creates first label; add/update UI test coverage for empty-label add flow.","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-20T12:55:12.745949-06:00","created_by":"Camden Webster","updated_at":"2026-02-20T12:55:12.745949-06:00","labels":["labels","settings","ux"]}
{"id":"MovingBox-3r6","title":"UI Test: dashboard remains visible after navigating to All Items","description":"DashboardNavigationUITests/testNavigationFromDashboardToAllItems: After tapping the All Inventory button and confirming the inventory list appears, XCTAssertFalse(dashboardScreen.allInventoryButton.exists) fails — the dashboard's allInventoryButton is still in the element tree. Root cause: With NavigationSplitView, the master column (dashboard) may remain visible alongside the detail column (All Items), especially on iPad or wide iPhone layouts. The assertion assumes push-style navigation hides the source view completely, which isn't true for split-view. Fix: Replace the assertion with a check that the inventory list IS displayed rather than asserting the dashboard is NOT visible. File: DashboardNavigationUITests.swift:81-83.","status":"open","priority":3,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T17:13:50.010142-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T17:13:50.010142-06:00"}
{"id":"MovingBox-4nn","title":"Video analysis UX hardening (duplicate-aware select-all, awake lock, video thumbnails)","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-20T15:21:14.87234-06:00","created_by":"Camden Webster","updated_at":"2026-02-20T15:28:22.306047-06:00","closed_at":"2026-02-20T15:28:22.306047-06:00","close_reason":"Closed"}
{"id":"MovingBox-5vj","title":"Refactor OpenAIService into thin app composition layer","description":"Update OpenAIService in the app target to delegate business logic to MovingBoxAI packages and adapters. Remove duplicated AI model/parsing/token-budget logic from app service files while preserving runtime behavior.","status":"open","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T09:44:21.63286-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:44:21.63286-06:00","labels":["ai","architecture","modularization"]}
{"id":"MovingBox-6mk","title":"Make add-video row fill full List cell in video library sheet","description":"In VideoLibrarySheetView, remove list section background/padding around the Add New Video row so the button visually fills the entire cell.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T15:20:16.215001-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T15:23:02.187961-06:00","closed_at":"2026-02-06T15:23:02.187961-06:00","close_reason":"Closed"}
{"id":"MovingBox-6vc","title":"Make video selection bottom action area a floating material overlay","description":"In VideoItemSelectionListView, convert the select-all/location/continue section into a top-rounded material panel layered above the scroll content so rows blend behind it.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T13:10:45.199052-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T13:14:06.959421-06:00","closed_at":"2026-02-06T13:14:06.959421-06:00","close_reason":"Closed"}
{"id":"MovingBox-6yl","title":"Remove residual bottom strip under video selection overlay","description":"A small gap remains below VideoItemSelectionListView bottom action panel. Move bottom safe-area handling to container-level so overlay background reaches physical screen bottom.","status":"closed","priority":1,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T14:29:26.179141-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T14:31:15.196015-06:00","closed_at":"2026-02-06T14:31:15.196015-06:00","close_reason":"Closed"}
{"id":"MovingBox-6yt","title":"Pin video selection bottom panel to screen bottom","description":"In VideoItemSelectionListView, ensure the bottom action section (selection summary/location/continue) is positioned at the physical bottom edge by ignoring bottom safe area so the section is pushed down as requested.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T13:50:09.375656-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T13:52:19.161723-06:00","closed_at":"2026-02-06T13:52:19.161723-06:00","close_reason":"Closed"}
{"id":"MovingBox-76m","title":"Expand Tuist manifests to own modular workspace generation","description":"Grow Tuist setup from bootstrap to full modular workspace generation while preserving existing MovingBox.xcodeproj until parity is proven. Include package dependencies and test targets in generated project definitions.","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T09:44:28.013873-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:44:28.013873-06:00","labels":["architecture","modularization","tuist"]}
{"id":"MovingBox-7g2","title":"Fix label color migration from 2.1.0 UIColor blobs","description":"Problem\nLabel color migration from 2.1.0 relies on decoding Core Data UIColor archive blobs from `ZINVENTORYLABEL.ZCOLOR`.\n\nObserved behavior\nIn exploratory migration run `/Users/camden.webster/dev/MovingBox/.build/exploratory-upgrade/20260220-110340`, label records and emoji migrated correctly, but migration logged `skippedColors=3` because seeded test blobs were not valid archived UIKit `UIColor` payloads. The migration path then falls back to gray.\n\nWhy this matters\nColor fidelity is user-visible metadata and should migrate accurately for real 2.1.0 stores. The current fallback behavior prevents crashes/corruption, but we need confidence that valid archived 2.1.0 colors decode and persist correctly in sqlite-data.\n\nScope\n- Validate and harden UIColor blob decode path used during label migration.\n- Ensure valid archived 2.1.0 color blobs map to expected color hex values in `inventoryLabels`.\n- Preserve safe fallback behavior for malformed blobs.\n- Add targeted unit coverage for both valid and invalid blob inputs.\n\nOut of scope\n- Changes to non-label color systems.\n- UI redesign of label color rendering.\n","acceptance_criteria":"1) Given valid 2.1.0 archived UIColor blobs, migrated labels retain expected non-fallback colors in sqlite-data.\n2) Given invalid/corrupt color blobs, migration does not fail; label migrates with fallback gray and skippedColors increments/logs.\n3) Unit tests cover valid decode path and fallback path in migration code.\n4) Exploratory rerun against updated playbook shows labels/policies/items/home/location checks pass and label color migration evidence is captured (ideally skippedColors=0 for real 2.1.0-created labels).","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-20T11:23:29.647265-06:00","created_by":"Camden Webster","updated_at":"2026-02-20T11:24:10.168493-06:00"}
{"id":"MovingBox-7te","title":"Restore video-selection nav bar visibility without duplicate close button","description":"EnhancedItemCreationFlowView should not hide the nav bar during video multi-item selection, but must not inject an extra leading close button. Keep single close/X from VideoItemSelectionListView.","status":"closed","priority":1,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T15:23:51.883592-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T15:25:34.300447-06:00","closed_at":"2026-02-06T15:25:34.300447-06:00","close_reason":"Closed"}
{"id":"MovingBox-7xq","title":"Optimize VideoItemSelectionListView streaming/list performance on older devices","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T10:58:51.926139-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T10:59:11.400051-06:00","closed_at":"2026-02-06T10:59:11.400051-06:00","close_reason":"Closed"}
{"id":"MovingBox-815","title":"UI Test: multi-photo tests can't reach item detail Edit button","description":"MultiPhotoUITests: testMultiPhotoDisplayInDetailView and testEditModePhotoManagement both fail after navigating to All Items, tapping the first cell, and waiting for the Edit button in the navigation bar.\n\nFlow: navigateToAllItems() → wait for 'All Items' nav title → tap firstCell → wait for navigationBars.buttons['Edit'] (5s timeout) → fails.\n\nThe tests use [Is-Pro, Skip-Onboarding, Use-Test-Data, Disable-Animations, UI-Testing-Mock-Camera] launch arguments. The All Items navigation succeeds and the nav title appears, but after tapping a cell, the detail view either doesn't appear or doesn't have an 'Edit' button with that identifier.\n\nPossible causes: (1) The item detail view's Edit button accessibility identifier changed, (2) the detail view loads in a mode that doesn't show Edit initially, (3) on iPad split view the cell tap doesn't navigate as expected, or (4) the detail view has a loading state that delays the Edit button appearance beyond 5s.\n\nFiles: MultiPhotoUITests.swift, InventoryDetailScreen.swift (editButton property).","status":"open","priority":3,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T17:14:15.525123-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T17:14:15.525123-06:00"}
{"id":"MovingBox-8gl","title":"Commit pending video library location metadata row change","description":"Commit the remaining local change in VideoLibrarySheetView that updates saved video location metadata rendering in each row.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T16:32:50.795748-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T16:34:07.565797-06:00","closed_at":"2026-02-06T16:34:07.565797-06:00","close_reason":"Closed"}
{"id":"MovingBox-8l1","title":"Replace GeometryReader bottom pinning in video selection","description":"Refactor VideoItemSelectionListView to remove GeometryReader and negative safe-area inset compensation for bottom action panel. Use a single, predictable bottom overlay strategy to avoid layout churn and inset over-correction while keeping panel pinned to bottom.","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T14:15:54.107612-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T14:17:25.202343-06:00","closed_at":"2026-02-06T14:17:25.202343-06:00","close_reason":"Closed"}
{"id":"MovingBox-9hi","title":"Update CSV/DB export flow for multi-home","status":"in_progress","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-16T07:39:44.331618-06:00","created_by":"Camden Webster","updated_at":"2026-02-16T07:39:46.962908-06:00"}
{"id":"MovingBox-9lb","title":"Fix LocationSelectionView selection confirmation and add-location flow","description":"Location picker should not auto-dismiss on row tap; add explicit Done confirmation. Plus button should open EditLocationView in a medium detent sheet instead of creating a default location immediately.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T11:32:56.162774-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T11:34:42.165692-06:00","closed_at":"2026-02-06T11:34:42.165692-06:00","close_reason":"Closed"}
{"id":"MovingBox-9p6","title":"Unify SwiftUI previews with multi-state snapshot coverage","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-05T23:20:44.020759-06:00","created_by":"Camden Webster","updated_at":"2026-02-05T23:20:44.020759-06:00"}
{"id":"MovingBox-apf","title":"SwiftData to sqlite-data migration","description":"Migrate from SwiftData to the new sqlite-data library by PointFreeCo. This will enable iCloud Family Sharing for MovingBox, an essential feature for collaborating on a home inventory.","notes":"Exploratory upgrade rerun at /Users/camden.webster/dev/MovingBox/.build/exploratory-upgrade/20260220-063316. Migration still fails: 'Migration produced zero homes from non-empty store — aborting'. Post counts show locations inflated 3-\u003e15; sqlite migration completion flag missing (attempts=1).","status":"in_progress","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-02T21:16:25.310815-06:00","created_by":"Camden Webster","updated_at":"2026-02-20T07:03:23.133573-06:00"}
{"id":"MovingBox-av0","title":"UI Test: toolbarMenu identifier missing from inventory list toolbar","description":"PhotoButtonVisibilityUITests: testFreeUserCanAddFirstPhoto and testProUserCanAddFirstPhoto both fail at listScreen.openToolbarMenu() because app.buttons[\"toolbarMenu\"] doesn't exist. The error output shows the app is still displaying dashboard-level buttons (dashboard-settings-button, dashboard-all-inventory-button, etc.) rather than the All Items toolbar. Either (1) navigateToAllItems() isn't completing the push, or (2) the inventory list toolbar was redesigned and the \"toolbarMenu\" accessibility identifier was removed/renamed. Also affects testFreeUserCannotAddSecondPhoto which can't find the 'All Items' nav title. Files: InventoryListScreen.swift (toolbarMenu property), PhotoButtonVisibilityUITests.swift.","status":"open","priority":2,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T17:13:46.097026-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T17:13:46.097026-06:00"}
{"id":"MovingBox-awa","title":"Improve video analysis quality, duplicate grouping, and progressive results UI","description":"Implement: (1) duplicate suggestion grouping in video item list, (2) discard blurry/duplicate crops before pass-2 enrichment and persisted secondary photos, (3) stricter label matching before creating new labels, (4) smarter emoji mapping for new labels, (5) progressive video batch result updates with skeleton placeholders while analysis is still running.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-05T23:22:58.096068-06:00","created_by":"Camden Webster","updated_at":"2026-02-05T23:32:11.961395-06:00","closed_at":"2026-02-05T23:32:11.961395-06:00","close_reason":"Closed"}
{"id":"MovingBox-ba0","title":"Extract import/export orchestration into package with filesystem/photo ports","description":"Refactor data import/export orchestration into package modules that depend on ports for filesystem and image pipelines. Keep platform-specific IO/photo details in adapters so core import/export logic is testable in isolation.","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T09:44:34.747935-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:44:34.747935-06:00","labels":["architecture","data","modularization"]}
{"id":"MovingBox-bri","title":"Video analysis SQLite integration","status":"open","priority":1,"issue_type":"epic","owner":"camden@mothersound.dev","created_at":"2026-02-13T14:38:25.196345-06:00","created_by":"Camden Webster","updated_at":"2026-02-13T14:38:25.196345-06:00"}
{"id":"MovingBox-d1v","title":"UI Test: label CRUD operations show stale counts and broken navigation","description":"LabelManagementUITests: Three failures with distinct symptoms sharing a root cause area.\n\n1. testCreateNewLabel: XCTAssertEqual failed (\"13\") != (\"14\") — after creating a label, getLabelCount() returns the same count as before. The label creation UI flow completes (createLabel returns, waitForLabelsList succeeds, waitForLabelToExist succeeds) but the count doesn't increase.\n\n2. testDeleteLabelWithSwipe: XCTAssertEqual failed (\"13\") != (\"12\") — after swiping to delete, getLabelCount() returns the same count. The swipeToDeleteLabel and waitForLabelToDisappear succeed but count is unchanged.\n\n3. testEditExistingLabel: XCTAssertTrue failed 'Should return to labels list' — after editing a label name, saving, and tapping back, waitForLabelsList() returns false.\n\nCommon root cause: getLabelCount() likely counts cells or static texts in a way that doesn't match the actual label rows (perhaps counting section headers, navigation elements, or other cells). The count consistently reads 13 regardless of adds/deletes. For the edit test, the navigation back to the list after save may require an additional back button tap or the save action now dismisses to a different screen.\n\nFiles: LabelScreen.swift (getLabelCount, waitForLabelsList methods), LabelManagementUITests.swift.","status":"open","priority":2,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T17:14:02.347062-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T17:14:02.347062-06:00"}
{"id":"MovingBox-d37","title":"Switch AI analysis to Gemini via OpenRouter","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-03T08:30:36.182938-06:00","created_by":"Camden Webster","updated_at":"2026-02-03T09:01:24.409766-06:00","closed_at":"2026-02-03T09:01:24.409766-06:00","close_reason":"Closed"}
{"id":"MovingBox-ddt","title":"UI Test: location navigation from dashboard broken","description":"LocationManagementUITests: Both testCreateNewLocationWithSymbol and testDeleteLocationMovesItemsToNoLocation fail at locationScreen.waitForLocationsList() immediately after dashboardScreen.tapLocations(). The test uses launch args [Use-Test-Data, Disable-Animations, Skip-Onboarding, Disable-Persistence]. The tapLocations() call on DashboardScreen likely taps the 'dashboard-locations-button', but the resulting navigation doesn't reach a screen that locationScreen.waitForLocationsList() recognizes. Possible causes: (1) The locations button navigates to a different view structure than expected, (2) the waitForLocationsList() check looks for a nav bar title or element that changed, or (3) the navigation is interrupted. Files: DashboardScreen.swift (tapLocations method), LocationScreen.swift (waitForLocationsList method), LocationManagementUITests.swift.","status":"open","priority":2,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T17:13:54.552261-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T17:13:54.552261-06:00"}
{"id":"MovingBox-ds5","title":"Use memory-efficient in-memory thumbnails for video item selection rows","description":"Add dedicated small row-thumbnail generation/caching in MultiItemSelectionViewModel, switch VideoItemSelectionListView rows to use it, and clear temporary image buffers on teardown. Ensure discarded-item thumbnails are never written to disk.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T10:26:08.576477-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T10:26:28.176602-06:00","closed_at":"2026-02-06T10:26:28.176602-06:00","close_reason":"Implemented in-memory row-thumbnail pipeline, switched list rows to use it, and added temporary image-buffer cleanup on selection view teardown and after successful item creation."}
{"id":"MovingBox-euy","title":"Fix transparent background bleed in video analysis full-screen flow","description":"When launching video analysis from InventoryListView, the presented flow shows underlying InventoryListView nav title/toolbar through transparent scroll background. Ensure EnhancedItemCreationFlowView/VideoItemSelectionListView renders with an opaque system background so parent UI cannot bleed through.","status":"closed","priority":1,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T13:21:40.131071-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T13:23:51.322671-06:00","closed_at":"2026-02-06T13:23:51.322671-06:00","close_reason":"Closed"}
{"id":"MovingBox-gci","title":"Add video selection cancel toolbar button and bottom button breathing room","description":"Increase bottom spacing for VideoItemSelectionListView action button and surface a visible leading Cancel/X toolbar button during video multi-item selection flow (matching MultiItemSelectionView behavior).","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T14:52:13.652601-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T14:53:59.81042-06:00","closed_at":"2026-02-06T14:53:59.81042-06:00","close_reason":"Closed"}
{"id":"MovingBox-gio","title":"Import/export parity: CSV full-field import + database backup restore","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-20T08:56:22.572426-06:00","created_by":"Camden Webster","updated_at":"2026-02-20T09:22:34.647502-06:00","closed_at":"2026-02-20T09:22:34.647502-06:00","close_reason":"Closed"}
{"id":"MovingBox-gxk","title":"Move video ingestion to InventoryList video library sheet with TipKit discovery","description":"Remove camera segmented video mode, add InventoryList top-toolbar video entry point, present location-aware saved video library with add/share actions, launch video analysis from picker selection with location propagation, and show TipKit cue on second InventoryList visit if untouched.","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T12:49:08.637816-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T12:59:43.571745-06:00","closed_at":"2026-02-06T12:59:43.571745-06:00","close_reason":"Closed"}
{"id":"MovingBox-i9i","title":"Family Sharing Invite Acceptance Flow","description":"Per-home family sharing invite acceptance flow. When an existing user accepts a share invite for a specific home, prompt them to choose: Join Alongside (keep existing homes), Merge Into Shared Home (move items from one home), or Start Fresh (delete all data). Includes photo BLOB migration and moving sharing UI to HomeDetailSettingsView. See tasks/prd-family-sharing-invite-acceptance.md for full PRD.","status":"closed","priority":1,"issue_type":"epic","owner":"camden@mothersound.dev","created_at":"2026-02-08T07:33:32.339749-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T21:44:57.420071-06:00","closed_at":"2026-02-12T21:44:57.420071-06:00","close_reason":"Completed all child tasks for family sharing invite acceptance: photo BLOB/export work, per-home sharing controls, existing-user invite routing, join/merge/start-fresh options, merge home + dedup selection, transactional merge execution, resilient failure handling, and completion-state UX.","labels":["family-sharing"]}
{"id":"MovingBox-i9i.1","title":"Migrate photos from file URLs to CKAsset-compatible BLOBs","description":"US-000: Prerequisite for sharing — photos are currently stored as files in iCloud Drive ubiquitous container, which syncs between the same user's devices but NOT to shared users.\n\n**Data Model Changes:**\n- New table: `photos` (id TEXT PK NOT NULL ON CONFLICT REPLACE, data BLOB NOT NULL)\n- Per-entity join tables with sort ordering:\n  - `inventoryItemPhotos` (id TEXT PK, inventoryItemID FK, photoID FK, sortOrder INT)\n  - `homePhotos` (id TEXT PK, homeID FK, photoID FK, sortOrder INT)\n  - `inventoryLocationPhotos` (id TEXT PK, inventoryLocationID FK, photoID FK, sortOrder INT)\n- Remove `imageURL: URL?` and `secondaryPhotoURLs: [String]` from SQLiteHome, SQLiteInventoryLocation, SQLiteInventoryItem\n- NO `primaryPhotoID` FK — primary photo determined by querying join table ORDER BY sortOrder ASC LIMIT 1\n- When a photo is deleted and the next becomes primary, no FK update needed — sort order handles it\n- Add photos table + all join tables to SyncEngine table list\n\n**Thumbnails:**\n- NOT stored in database — derived data, generated on-demand from primary photo BLOB\n- Cached to disk at Thumbnails/{photoID}_thumb.jpg, keyed by photo ID (not entity ID)\n- In-memory NSCache for hot-path (existing OptimizedImageManager pattern)\n- When primary photo changes (first deleted → second becomes primary), photo ID changes → new thumbnail auto-generated, old one cleaned up lazily\n\n**Migration:**\n- Add to existing SwiftData → sqlite-data migration in SQLiteMigrationCoordinator (v2.2.0 first launch)\n- Read each photo file from disk, insert as BLOB into photos table\n- Create join table entries with correct sort order (primary = 0, secondary = 1, 2, ...)\n- Clean up old photo files and iCloud Drive Images/ directory after migration\n\n**Code Updates:**\n- OptimizedImageManager: save/load photos to/from BLOB storage; thumbnails generated from BLOB data\n- PhotoManageable protocol: work with photo IDs and BLOB storage instead of file URLs\n- Remove iCloud Drive ubiquitous container dependency for photos\n\n**Acceptance Criteria:**\n- photos table with proper schema (ON CONFLICT REPLACE)\n- Join tables for all three entity types with sortOrder\n- imageURL and secondaryPhotoURLs columns removed\n- Primary photo resolved by sort order query, no primaryPhotoID FK\n- File-to-BLOB migration in SQLiteMigrationCoordinator\n- OptimizedImageManager updated for BLOB storage\n- Thumbnails on-demand from BLOB, cached by photo ID\n- Old files cleaned up\n- All new tables in SyncEngine\n- Shared users see each other's photos\n- Build succeeds","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-08T07:33:46.468854-06:00","created_by":"Camden Webster","updated_at":"2026-02-09T14:53:42.120672-06:00","closed_at":"2026-02-09T14:53:42.120672-06:00","close_reason":"Photo BLOB migration complete: schema, migration coordinator, view refactoring, and test updates all done. 42 files changed, 251 tests passing.","labels":["family-sharing","migration","photos"],"dependencies":[{"issue_id":"MovingBox-i9i.1","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-08T07:33:46.471249-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-i9i.10","title":"Remove remaining iCloud Drive Images directory creation code","description":"Phase 11 cleanup follow-up from sqlite-data photo migration: remove any remaining code paths that create or depend on iCloud Drive Images/ directory now that photos are stored as BLOBs and thumbnails are local derived cache.","notes":"Started audit for remaining iCloud Drive Images/ code paths. Found no remaining directory creation calls; only migration-time fallback search/cleanup references in PhotoBlobMigrationCoordinator.swift.","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-12T16:33:58.83379-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T17:05:01.842088-06:00","closed_at":"2026-02-12T17:05:01.842088-06:00","close_reason":"Audited codebase: no remaining code paths create iCloud Drive Images/ directories. Kept legacy migration fallback/cleanup references in PhotoBlobMigrationCoordinator for 2.1.0 -\u003e 2.2.0 upgrade compatibility.","labels":["family-sharing","migration","photos"],"dependencies":[{"issue_id":"MovingBox-i9i.10","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-12T16:33:58.836189-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-i9i.2","title":"Move sharing UI to HomeDetailSettingsView","description":"US-001: Move per-home sharing management from root settings into each home's detail settings.\n\n**Changes to HomeDetailSettingsView:**\n- Add \"Sharing\" section below Organization, above Delete\n- Show sharing status: \"Not Shared\" / \"Shared with N people\"\n- \"Share This Home\" button → launches UICloudSharingController scoped to this home\n- \"Manage Sharing\" button (if already shared) → opens participant management\n- \"Stop Sharing\" button (if owner) → revoke all access\n- Participant list with roles (Owner, Member)\n- Non-owners see \"Shared by [Owner Name]\" with \"Leave This Home\" option\n- Pro subscription still gates \"Share This Home\" button\n\n**FamilySharingSettingsView:**\n- Either becomes a summary page listing all homes' sharing status with links to each HomeDetailSettingsView\n- Or removed entirely (sharing managed only from within each home's settings)\n- Refactor FamilySharingViewModel to work per-home instead of \"primary home\" only\n\n**Acceptance Criteria:**\n- Sharing section in HomeDetailSettingsView\n- Share/manage/stop buttons scoped to specific home\n- Participant list with roles\n- Non-owner leave option\n- Pro gate on sharing initiation\n- FamilySharingSettingsView updated or removed\n- Build succeeds","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-08T07:33:56.931349-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T17:04:52.49165-06:00","closed_at":"2026-02-12T17:04:52.49165-06:00","close_reason":"Moved family sharing controls to per-home context: added Sharing section in HomeDetailSettingsView with scoped status/participants/actions (share/manage/stop/leave), pro gate for share initiation, and converted FamilySharingSettingsView into a per-home summary linking to each home's settings.","labels":["family-sharing"],"dependencies":[{"issue_id":"MovingBox-i9i.2","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-08T07:33:56.933691-06:00","created_by":"Camden Webster"},{"issue_id":"MovingBox-i9i.2","depends_on_id":"MovingBox-i9i.1","type":"blocks","created_at":"2026-02-08T08:03:54.501997-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-i9i.3","title":"Detect existing data when accepting share invite","description":"US-002: Route existing users with data to the new acceptance flow.\n\n**Changes:**\n- SceneDelegate: When already-onboarded user receives share metadata, check if user has existing data (any homes with items)\n- If data exists → route to new acceptance flow (new AppState case)\n- If no data → accept silently, shared home just appears alongside\n- New users (first launch) → continue using existing JoiningShareView\n- Share metadata identifies which specific home is being shared (via root record ID)\n\n**App State Routing:**\n- Add `.acceptingShareExistingUser(CKShare.Metadata)` to AppState enum\n- Add routing in MovingBoxApp body to show the new flow view\n\n**Acceptance Criteria:**\n- SceneDelegate routes to new flow for onboarded users with data\n- Empty-database onboarded users get silent accept\n- New users still get JoiningShareView\n- Share metadata correctly identifies the specific home\n- Build succeeds","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-08T07:34:06.391365-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T20:04:15.49268-06:00","closed_at":"2026-02-12T20:04:15.49268-06:00","close_reason":"Routed onboarded users with existing homes+items into a new existing-user acceptance app state/flow (instead of silent accept), preserved silent accept for empty-state onboarded users, preserved first-launch JoiningShareView path, and validated via build + OnboardingIntegrationTests.","labels":["family-sharing","ui"],"dependencies":[{"issue_id":"MovingBox-i9i.3","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-08T07:34:06.393014-06:00","created_by":"Camden Webster"},{"issue_id":"MovingBox-i9i.3","depends_on_id":"MovingBox-i9i.2","type":"blocks","created_at":"2026-02-08T08:03:54.603196-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-i9i.4","title":"Present join options — Join Alongside, Merge, or Start Fresh","description":"US-003: Full-screen flow with three options for existing users accepting a home share invite.\n\n**UI Design:**\n- Full-screen blocking flow (similar to JoiningShareView)\n- Shows \"You're joining [Owner Name]'s [Home Name]\"\n- Owner name from share.owner.userIdentity.nameComponents?.formatted()\n- Home name from the synced SQLiteHome record after acceptShare()\n- Three options:\n  1. **Join Alongside** (default/recommended) — \"Keep your existing homes and add [Home Name] to your inventory\"\n  2. **Merge Into Shared Home** — \"Move items from one of your homes into [Home Name]\"\n  3. **Start Fresh** (destructive styling) — \"Remove all your existing data and use only the shared home\"\n\n**Flow:**\n- Join Alongside → accept share immediately, shared home appears alongside existing homes\n- Merge → advances to home selection + dedup choice (US-004)\n- Start Fresh → destructive confirmation alert, then delete all local data + accept share\n\n**Acceptance Criteria:**\n- Full-screen flow blocks app interaction\n- Shows owner name and home name\n- Three clear options with appropriate styling\n- Join Alongside accepts immediately\n- Merge advances to home picker\n- Start Fresh requires confirmation before deleting\n- Build succeeds","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-08T07:34:13.033723-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T20:55:07.93115-06:00","closed_at":"2026-02-12T20:55:07.93115-06:00","close_reason":"Implemented full-screen existing-user acceptance UI with three options (Join Alongside, Merge Into Shared Home, Start Fresh), added Start Fresh destructive confirmation + local data deletion before acceptance, wired Join Alongside acceptance path, and advanced Merge to a home picker phase with home/item/location context. Validated with build + OnboardingIntegrationTests.","labels":["family-sharing","ui"],"dependencies":[{"issue_id":"MovingBox-i9i.4","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-08T07:34:13.035283-06:00","created_by":"Camden Webster"},{"issue_id":"MovingBox-i9i.4","depends_on_id":"MovingBox-i9i.3","type":"blocks","created_at":"2026-02-08T08:03:54.691571-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-i9i.5","title":"Select home to merge and deduplication preference","description":"US-004: Home picker and dedup choice for users who chose Merge.\n\n**Home Picker:**\n- List all user's existing homes (name, item count, location count)\n- Tapping selects the home to merge into the shared home\n\n**Dedup Choice (after selecting home):**\n- **Merge matching names** — \"Locations and labels with the same name will be combined. The owner's versions take priority.\"\n- **Keep all separate** — \"Everything will be kept as-is. You may see duplicate names.\"\n- Choosing either proceeds to merge execution (US-005)\n\n**Acceptance Criteria:**\n- Home picker shows all existing homes with counts\n- Dedup choice presented after home selection\n- Routes to correct merge execution path\n- Build succeeds","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-08T07:34:29.904557-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T21:13:33.266767-06:00","closed_at":"2026-02-12T21:13:33.266767-06:00","close_reason":"Implemented merge home picker selection + dedup preference step in ExistingUserShareAcceptanceView. Added selectable home rows with counts, dedicated dedup choice UI, and routing scaffolding that captures source home + dedup mode and transitions into merge execution path for i9i.6. Verified with xcodebuild build and focused OnboardingIntegrationTests.","labels":["data-merge","family-sharing"],"dependencies":[{"issue_id":"MovingBox-i9i.5","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-08T07:34:29.924157-06:00","created_by":"Camden Webster"},{"issue_id":"MovingBox-i9i.5","depends_on_id":"MovingBox-i9i.4","type":"blocks","created_at":"2026-02-08T08:03:54.781758-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-i9i.6","title":"Execute merge into shared home","description":"US-005: Core merge logic — move items from selected home into shared home.\n\n**Pre-merge:**\n1. Accept share via syncEngine.acceptShare(metadata:)\n2. Wait for syncEngine.isFetchingChanges to become false (owner's home now local)\n3. Snapshot joiner's record IDs before merge\n\n**Merge WITH dedup (single database.write {} transaction):**\n- **Locations (matched):** For each joiner location matching a shared home location by name (case-insensitive): move items to shared location, delete joiner's location\n- **Locations (unmatched):** Move into shared home (update homeID FK)\n- **Items:** Remaining items get homeID updated to shared home\n- **Labels (global):** For matching labels by name: reassign inventoryItemLabels (check duplicate join rows first), delete joiner's label. Affects entire database since labels are global.\n- **Insurance policies:** For matching policies on merging homes: reassign homeInsurancePolicies, delete joiner's policy\n- Delete joiner's selected home after all children moved\n\n**Merge WITHOUT dedup:**\n- Move all locations into shared home (update homeID)\n- Move all items (update homeID)\n- Move insurance policy associations\n- Delete joiner's selected home\n- Labels left as-is\n\n**General:**\n- Other homes joiner owns remain untouched\n- Indeterminate spinner during execution\n- On failure, roll back transaction, show error with retry\n- On success, transition to completion (US-006)\n\n**Acceptance Criteria:**\n- Locations deduplicated or moved correctly\n- Items moved with correct homeID + locationID updates\n- Labels deduplicated globally when opted in\n- Insurance policies deduplicated per merging homes\n- Single transaction for atomicity\n- Other homes untouched\n- Build succeeds","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-08T07:34:33.556466-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T21:44:47.974276-06:00","closed_at":"2026-02-12T21:44:47.974276-06:00","close_reason":"Implemented merge execution in ExistingUserShareAcceptanceView: accept share, wait for isFetchingChanges to settle, resolve shared home, snapshot joiner IDs pre-accept, and run atomic database.write merge transaction for dedup and non-dedup paths (locations, items, global labels, insurance policy joins), with rollback-safe retry messaging.","labels":["data-merge","family-sharing"],"dependencies":[{"issue_id":"MovingBox-i9i.6","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-08T07:34:33.558112-06:00","created_by":"Camden Webster"},{"issue_id":"MovingBox-i9i.6","depends_on_id":"MovingBox-i9i.4","type":"blocks","created_at":"2026-02-08T08:03:54.88652-06:00","created_by":"Camden Webster"},{"issue_id":"MovingBox-i9i.6","depends_on_id":"MovingBox-i9i.5","type":"blocks","created_at":"2026-02-09T12:24:44.789505-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-i9i.7","title":"Show completion state after share acceptance","description":"US-006: Success confirmation screen after acceptance completes.\n\n**UI Design:**\n- Similar to JoiningShareView success phase (checkmark, \"You're All Set!\")\n- Context-appropriate messaging:\n  - Join Alongside: \"You now have access to [Home Name]\"\n  - Merge: \"Your items have been moved to [Home Name]\" with summary (e.g., \"Moved 15 items, combined 3 labels\")\n  - Start Fresh: \"You're all set with [Home Name]\"\n- \"Get Started\" button transitions to main app\n- OnboardingManager state NOT modified (user was already onboarded)\n\n**Acceptance Criteria:**\n- Success screen with checkmark animation\n- Context-appropriate messaging for each path\n- Get Started button transitions to main app\n- OnboardingManager unchanged\n- Build succeeds","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-08T07:34:38.924241-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T21:44:48.151898-06:00","closed_at":"2026-02-12T21:44:48.151898-06:00","close_reason":"Implemented completion-state UX for existing-user invite acceptance with context-specific success messaging per path (Join Alongside, Merge, Start Fresh) and merge summary details (moved items and combined entities), while keeping onboarding state untouched for existing users.","labels":["family-sharing","ui"],"dependencies":[{"issue_id":"MovingBox-i9i.7","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-08T07:34:38.925711-06:00","created_by":"Camden Webster"},{"issue_id":"MovingBox-i9i.7","depends_on_id":"MovingBox-i9i.5","type":"blocks","created_at":"2026-02-08T08:03:54.972026-06:00","created_by":"Camden Webster"},{"issue_id":"MovingBox-i9i.7","depends_on_id":"MovingBox-i9i.6","type":"blocks","created_at":"2026-02-08T08:03:55.058491-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-i9i.8","title":"Handle share acceptance failure gracefully","description":"US-007: Error handling across all paths in the acceptance flow.\n\n**Error Scenarios:**\n1. **CloudKit share acceptance fails** (network, permissions):\n   - Show error with \"Try Again\" and \"Cancel\"\n   - Cancel dismisses flow, user keeps data as-is\n\n2. **Merge transaction fails** (database error):\n   - Roll back completely — no partial state\n   - Show error with \"Try Again\"\n\n3. **Start Fresh deletion succeeds but share acceptance fails**:\n   - Show specific error: data was deleted but share failed\n   - \"Try Again\" retries only the share acceptance\n\n**Acceptance Criteria:**\n- Network errors show retry + cancel\n- Merge failures roll back completely\n- Start Fresh + share failure shows specific messaging\n- No partial state ever persists\n- Build succeeds","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-08T07:34:45.574505-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T21:44:48.063701-06:00","closed_at":"2026-02-12T21:44:48.063701-06:00","close_reason":"Implemented invite acceptance failure handling across paths: cloud accept failures now show Try Again + Cancel (dismiss flow), merge transaction failures report full rollback and allow retry, and Start Fresh now shows specific post-deletion share-accept failure messaging with retry that only re-attempts share acceptance.","labels":["error-handling","family-sharing"],"dependencies":[{"issue_id":"MovingBox-i9i.8","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-08T07:34:45.576118-06:00","created_by":"Camden Webster"},{"issue_id":"MovingBox-i9i.8","depends_on_id":"MovingBox-i9i.3","type":"blocks","created_at":"2026-02-08T08:03:55.143537-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-i9i.9","title":"Write photo BLOBs into DataManager export/import ZIP","description":"Phase 8 follow-up from sqlite-data photo migration: update DataManager export/import so photo data is included in ZIP payloads instead of exporting empty photo filename fields. Ensure import recreates photo rows/join-table links from ZIP content and keeps behavior backward-compatible with older exports.","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-12T16:33:54.668265-06:00","created_by":"Camden Webster","updated_at":"2026-02-12T16:42:27.473405-06:00","closed_at":"2026-02-12T16:42:27.473405-06:00","close_reason":"Implemented Phase 8: DataManager now exports photo BLOBs into ZIP photos/, populates PhotoFilename fields, imports ZIP photos directly into photo tables, and added/updated DataManager tests for photo export/import coverage.","labels":["family-sharing","migration","photos"],"dependencies":[{"issue_id":"MovingBox-i9i.9","depends_on_id":"MovingBox-i9i","type":"parent-child","created_at":"2026-02-12T16:33:54.672165-06:00","created_by":"Camden Webster"}]}
{"id":"MovingBox-iiv","title":"Fix VideoLibrarySheetView SQLite types","description":"Replace InventoryLocation with SQLiteInventoryLocation","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-13T14:38:41.315911-06:00","created_by":"Camden Webster","updated_at":"2026-02-13T15:10:01.893206-06:00","closed_at":"2026-02-13T15:10:01.893206-06:00","close_reason":"Closed"}
{"id":"MovingBox-iru","title":"Auto-select newly created location in LocationSelectionView","description":"When user adds a location from the picker's plus button, automatically select that newly created location in the list instead of leaving prior selection.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T11:55:35.439996-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T11:58:51.019774-06:00","closed_at":"2026-02-06T11:58:51.019774-06:00","close_reason":"Closed"}
{"id":"MovingBox-kmr","title":"Extract onboarding/settings state transitions into package domain","description":"Move onboarding and settings decision logic/state transitions into package-level domain/use-case modules. Keep SwiftUI binding/persistence integration in app layer adapters.","status":"open","priority":3,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T09:44:38.002434-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:44:38.002434-06:00","labels":["architecture","modularization","onboarding"]}
{"id":"MovingBox-njh","title":"UI Test: mock camera → item detail transition fails in multi-home tests","description":"MultiHomeNavigationUITests: Two item creation tests and two move-item tests fail.\n\nCamera flow failures (2 tests):\n- testCreateItemWithLocation_ShouldInheritHomeFromLocation: inventoryDetailScreen.titleField doesn't appear within 10s after camera capture. iPad variant fails even earlier at 'Dashboard should be visible after launch'.\n- testCreateMultipleItems_ShouldAllAssignToCorrectHome: Same — titleField timeout after cameraScreen.finishCapture(). Uses Disable-Persistence (empty database, default home only).\n\nThe camera mock flow (tapAddItemFromCamera → waitForCamera → takePhoto → finishCapture) successfully triggers the camera but the transition to the item detail screen (which should show titleField) doesn't complete. This may be because: (1) the mock camera's finishCapture doesn't dismiss the camera view, (2) the AI analysis loading screen blocks before the detail view appears, or (3) the detail screen layout changed and titleField has a different identifier.\n\nInventory list navigation failures (2 tests):\n- testMoveItemToAnotherHome_ShouldUpdateLocationDisplay: inventoryDetailScreen.editButton not found after tapping first item\n- testMoveItemToAnotherHome_ShouldAppearInNewHomeInventory: same failure\n\nThese tests launch with Use-Test-Data, navigate to All Items, tap first item, and expect to see an edit button. The navigation to the item detail view doesn't complete.\n\nFiles: CameraScreen.swift, InventoryDetailScreen.swift, MultiHomeNavigationUITests.swift.","status":"open","priority":2,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T17:14:10.473173-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T17:14:10.473173-06:00"}
{"id":"MovingBox-pqa","title":"Investigate true token-level streaming for multi-item OpenRouter responses","description":"Current implementation streams batch-level partial results into the selection UI as each batch response completes. Follow-up: evaluate whether AIProxy/OpenRouter chat completion streaming can safely emit structured partial items token-by-token for finer-grained, real-time updates.","notes":"Implemented true OpenRouter streaming path for multi-item structured responses with partial item parsing and coordinator-level progressive merge updates during each batch.","status":"closed","priority":3,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-05T23:31:56.958967-06:00","created_by":"Camden Webster","updated_at":"2026-02-05T23:40:42.413924-06:00","closed_at":"2026-02-05T23:40:42.413924-06:00","close_reason":"Completed: OpenRouter token streaming is now wired end-to-end with partial structured parsing and live multi-item UI updates during video analysis."}
{"id":"MovingBox-qgz","title":"Show completion message when video analysis streaming ends","description":"When full video analysis completes, replace the streaming skeleton row with a success message reminding users to review potential duplicates.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T11:21:19.288195-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T11:23:10.559222-06:00","closed_at":"2026-02-06T11:23:10.559222-06:00","close_reason":"Closed"}
{"id":"MovingBox-qkb","title":"PR review cleanup: MovingBoxApp fixes (P1 bugs, init dedup, print→logger, type-safe SQL)","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-07T15:39:53.379498-06:00","created_by":"Camden Webster","updated_at":"2026-02-07T15:47:58.180967-06:00","closed_at":"2026-02-07T15:47:58.180967-06:00","close_reason":"MovingBoxApp P1 bugs fixed, init deduped, print→logger, type-safe SQL, iso8601String renamed"}
{"id":"MovingBox-sgp","title":"Investigate and address all build warnings (incl. swift-format build phase)","description":"Run an xcodebuild warning triage pass and fix all build warnings in this repository, prioritizing swift-format lint warnings produced during build.\n\nRepro command:\n`xcodebuild -project MovingBox.xcodeproj -scheme MovingBox -configuration Debug -destination 'generic/platform=iOS Simulator' -derivedDataPath ./.build/DerivedData build 2\u003e\u00261 | xcsift -f toon -w`\n\nCurrent warning inventory (2026-02-06): 30 warnings, 0 compiler/linker errors.\n\nBy rule:\n- AlwaysUseLowerCamelCase: 16\n- ReplaceForEachWithForLoop: 10\n- EndOfLineComment: 3\n- NoBlockComments: 1\n\nBy target area:\n- `MovingBox/`: 20 warnings (primarily `OpenAIService.swift` plus `RevenueCatManager.swift`, `WhatsNewConfiguration.swift`, `BatchAnalysisView.swift`)\n- `MovingBoxTests/`: 9 warnings\n- `MovingBoxUITests/`: 1 warning\n\nDone criteria:\n- Build command above reports `warnings: 0` via xcsift.\n- Formatting-related changes are minimal and behavior-preserving.\n- Any non-format warning that requires product/code decisions is documented with follow-up issue(s).\n","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T09:16:17.24774-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T09:40:31.547455-06:00"}
{"id":"MovingBox-ug9","title":"Remove duplicate video flow toolbar cancel and preview prep banner","description":"Revert the extra cancel toolbar injection in EnhancedItemCreationFlowView (duplicate X) and remove the 'Preparing item previews...' loading banner from VideoItemSelectionListView.","status":"closed","priority":1,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T15:03:37.821672-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T15:05:11.929602-06:00","closed_at":"2026-02-06T15:05:11.929602-06:00","close_reason":"Closed"}
{"id":"MovingBox-uwj","title":"Fix VideoItemSelectionListView SQLite types","description":"Replace SwiftData types (InventoryItem, InventoryLocation, Home, InventoryLabel, ModelContext) with SQLite types (SQLiteInventoryItem, SQLiteInventoryLocation, SQLiteHome, SQLiteInventoryLabel)","status":"closed","priority":1,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-13T14:38:36.567588-06:00","created_by":"Camden Webster","updated_at":"2026-02-13T15:10:01.885653-06:00","closed_at":"2026-02-13T15:10:01.885653-06:00","close_reason":"Closed"}
{"id":"MovingBox-wgp","title":"Profile remaining video-analysis bottlenecks on iPhone 12 mini and tune list virtualization","description":"Follow-up: run Instruments on video analysis flow with 20+ detected items, measure main-thread time in row rendering/cropping/duplicate grouping, and add any additional throttling or virtualization needed beyond current animation/material reductions.","status":"open","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T10:59:40.98589-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T11:12:17.236925-06:00"}
{"id":"MovingBox-x4k","title":"UI Test: InventoryListDeletion setUp fails — items don't load","description":"InventoryListDeletionUITests/testSelectAndDeleteMultipleItems: The setUp method fails at waitForItemsToLoad() (10s timeout). Note: the test body itself is skipped (XCTSkip at line 92), but the setUp failure marks it as failed before reaching the skip.\n\nThe setUp uses launch args [Use-Test-Data, Disable-Animations] (no Skip-Onboarding, but Use-Test-Data causes early return to .main in MovingBoxApp.swift). It calls navigateToAllItems() then inventoryListScreen.waitForItemsToLoad() which waits for app.cells.firstMatch (10s).\n\nThis test is the only one in the file that fails — the other deletion tests (testEnterAndExitSelectionMode, testSelectAndDeleteSingleItem, testCancelDeletion, testDeleteAllItemsInView, testDeleteWithNoItemsSelected) all pass. This suggests the test is order-dependent — earlier tests may have deleted items leaving the list empty, or there's a timing issue when this specific test runs.\n\nPossible fix: Add Skip-Onboarding to launch args for safety, increase timeout, or check if earlier tests in the suite deplete the item list.\n\nFiles: InventoryListDeletionUITests.swift (setUp method, line 17-26).","status":"open","priority":3,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T17:14:22.162088-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T17:14:22.162088-06:00"}
{"id":"MovingBox-x5p","title":"Extract SQLiteRecordWriter shared insert functions","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-07T15:48:02.361266-06:00","created_by":"Camden Webster","updated_at":"2026-02-07T15:57:31.314828-06:00","closed_at":"2026-02-07T15:57:31.314828-06:00","close_reason":"SQLiteRecordWriter extracted with shared write structs, insert functions, colorHexFromData, and decimalFromDouble"}
{"id":"MovingBox-xp7","title":"Revert duplicate cancel toolbar in enhanced item flow","description":"Remove the extra top-left cancel toolbar added to EnhancedItemCreationFlowView during video selection. Keep existing cancel behavior in VideoItemSelectionListView so only one X button is shown.","status":"closed","priority":1,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T15:02:57.804348-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T15:05:50.923354-06:00","closed_at":"2026-02-06T15:05:50.923354-06:00","close_reason":"Closed"}
{"id":"MovingBox-xq0","title":"Add GitHub Actions CI and TestFlight workflows","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-21T09:18:34.613301-06:00","created_by":"Camden Webster","updated_at":"2026-02-21T15:17:36.933159-06:00","closed_at":"2026-02-21T15:17:36.933159-06:00","close_reason":"Closed"}
{"id":"MovingBox-z69","title":"Investigate MovingBoxUITests timeout in xcodebuild test","description":"UI tests timed out after 5 minutes when running xcodebuild test -scheme MovingBoxUITests on simulator id=F6D591E1-1CC6-4AE3-AB21-6BDFCA10B7D0. Repro with derivedDataPath ./.build/DerivedData.","notes":"2026-02-03: xcodebuild test -scheme MovingBoxUITests -destination 'platform=iOS Simulator,name=iPhone 17 Pro,OS=26.1' -derivedDataPath ./.build/DerivedData timed out after 300s.","status":"open","priority":3,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-03T08:47:28.951193-06:00","created_by":"Camden Webster","updated_at":"2026-02-03T09:00:01.478052-06:00"}
{"id":"MovingBox-zpo","title":"Convert video analysis status header to floating capsule","description":"In VideoItemSelectionListView, remove inline streaming status strip and present status text/progress in a floating capsule just below the nav bar while isStreamingResults is true.","status":"closed","priority":2,"issue_type":"task","owner":"camden@mothersound.dev","created_at":"2026-02-06T16:40:16.241559-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T16:41:59.492328-06:00","closed_at":"2026-02-06T16:41:59.492328-06:00","close_reason":"Closed"}
{"id":"MovingBox-zvz","title":"Remove residual bottom gap in video selection panel","description":"VideoItemSelectionListView still shows a small bottom gap when presented from EnhancedItemCreationFlowView. Move safe-area handling to the container layout so the bottom action panel truly reaches the physical bottom edge.","status":"closed","priority":1,"issue_type":"bug","owner":"camden@mothersound.dev","created_at":"2026-02-06T13:58:05.678559-06:00","created_by":"Camden Webster","updated_at":"2026-02-06T14:15:54.081135-06:00","closed_at":"2026-02-06T14:15:54.081144-06:00","close_reason":"Closed"}
